{"ast":null,"code":"var _jsxFileName = \"/Users/rodericandrews/Factory-ai/waterfall-app/client/src/components/CIA/CIAWizard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport axios from \"../../utils/axios\";\n// Import other dependencies\nimport { AlertCircle, Building2, Globe, FileText, Download, FileSpreadsheet, Database, Loader2, CheckCircle2 } from \"lucide-react\";\nimport { Button } from \"../ui/button\";\nimport { Input } from \"../ui/input\";\nimport { Label } from \"../ui/label\";\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent, CardFooter } from \"../ui/card\";\nimport { cn } from \"../../lib/utils\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CIAWizard = () => {\n  _s();\n  // State declarations\n  const [formData, setFormData] = useState({\n    companyName: \"\",\n    websiteUrl: \"\",\n    keyPersonOfInfluence: \"\",\n    primaryKeyword: \"\"\n  });\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const [errors, setErrors] = useState({});\n  const [reportId, setReportId] = useState(null);\n  const [reportStatus, setReportStatus] = useState(\"idle\");\n  const [reportProgress, setReportProgress] = useState(0);\n  const [currentPhase, setCurrentPhase] = useState(0);\n  const [phaseDetails, setPhaseDetails] = useState([]);\n  const [reportResults, setReportResults] = useState(null);\n  const [currentPollInterval, setCurrentPollInterval] = useState(5000);\n  const [exportLoading, setExportLoading] = useState({\n    pdf: false,\n    sheets: false,\n    notion: false\n  });\n  const [exportError, setExportError] = useState(null);\n\n  // Constants\n  const initialPollInterval = 5000;\n  const maxPollInterval = 60000;\n  const pollTimeoutRef = useRef(null);\n\n  // Define phases\n  const phases = [{\n    id: 1,\n    name: \"Business Intelligence\",\n    description: \"Analyzing company data and market position\"\n  }, {\n    id: 2,\n    name: \"SEO & Social Intelligence\",\n    description: \"Researching keywords and competitive landscape\"\n  }, {\n    id: 3,\n    name: \"Strategic Synthesis\",\n    description: \"Combining insights for strategic recommendations\"\n  }, {\n    id: 4,\n    name: \"Golden Hippo Offer\",\n    description: \"Developing tiered pricing and value stacks\"\n  }, {\n    id: 5,\n    name: \"Convergence Blender\",\n    description: \"Creating 12-week content calendar\"\n  }, {\n    id: 6,\n    name: \"Master Content Bible\",\n    description: \"Finalizing implementation roadmap\"\n  }];\n\n  // Poll for report status updates - FIXED VERSION WITH PROPER PARENTHESES\n  const pollReportStatus = async (id, currentInterval) => {\n    try {\n      const response = await axios.get(`/cia/reports/${id}/status`);\n      const {\n        status,\n        progress,\n        currentPhase: newPhaseNumber,\n        phaseProgress,\n        errors: reportErrors\n      } = response.data;\n      setReportStatus(status);\n      setReportProgress(progress);\n      if (newPhaseNumber) {\n        setCurrentPhase(newPhaseNumber);\n        updatePhaseDetails(newPhaseNumber, phaseProgress, status);\n      }\n      if (status === \"completed\" || status === \"failed\") {\n        if (status === \"completed\") {\n          fetchReportResults(id);\n        } else if (status === \"failed\" && reportErrors && reportErrors.length > 0) {\n          setErrors(prevErrors => ({\n            ...prevErrors,\n            report: reportErrors.map(err => `${err.stage}: ${err.message}`).join(\", \")\n          }));\n        }\n        if (pollTimeoutRef.current) {\n          clearTimeout(pollTimeoutRef.current);\n        }\n        return;\n      }\n\n      // If still processing, schedule next poll with exponential backoff\n      const nextInterval = Math.min(currentInterval * 2, maxPollInterval);\n      setCurrentPollInterval(nextInterval);\n      pollTimeoutRef.current = setTimeout(() => pollReportStatus(id, nextInterval), nextInterval);\n    } catch (error) {\n      console.error(\"Error polling report status:\", error);\n      let nextInterval = currentInterval;\n      if (error.response && error.response.status === 429) {\n        console.warn(\"Rate limited. Increasing poll interval significantly.\");\n        nextInterval = maxPollInterval;\n      } else {\n        nextInterval = Math.min(currentInterval * 2, maxPollInterval);\n      }\n      setCurrentPollInterval(nextInterval);\n      if (reportStatus !== \"completed\" && reportStatus !== \"failed\") {\n        pollTimeoutRef.current = setTimeout(() => pollReportStatus(id, nextInterval), nextInterval);\n      }\n    }\n  };\n\n  // Function to update phaseDetails based on API response\n  const updatePhaseDetails = (newPhaseNumber, phaseProgressFromServer, currentStatus) => {\n    setPhaseDetails(prevDetails => {\n      let newPhaseDetails = [...prevDetails];\n\n      // Initialize array if empty\n      if (newPhaseDetails.length === 0) {\n        newPhaseDetails = phases.map(p => ({\n          id: p.id,\n          name: p.name,\n          progress: 0,\n          status: \"pending\"\n        }));\n      }\n\n      // If report is fully completed, mark every phase complete\n      if (currentStatus === \"completed\") {\n        return newPhaseDetails.map(phase => ({\n          ...phase,\n          progress: 100,\n          status: \"completed\"\n        }));\n      }\n\n      // Mark previous phases as completed\n      for (let i = 0; i < newPhaseNumber - 1; i++) {\n        if (newPhaseDetails[i]) {\n          newPhaseDetails[i] = {\n            ...newPhaseDetails[i],\n            progress: 100,\n            status: \"completed\"\n          };\n        }\n      }\n\n      // Update the current phase entry\n      if (newPhaseNumber > 0 && newPhaseNumber <= phases.length) {\n        const currentPhaseIndex = newPhaseNumber - 1;\n        newPhaseDetails[currentPhaseIndex] = {\n          ...newPhaseDetails[currentPhaseIndex],\n          progress: phaseProgressFromServer !== null && phaseProgressFromServer !== void 0 ? phaseProgressFromServer : 0,\n          status: phaseProgressFromServer >= 100 ? \"completed\" : \"processing\"\n        };\n      }\n\n      // Handle failure status\n      if (currentStatus === \"failed\" && newPhaseNumber > 0) {\n        const failingPhaseIndex = newPhaseNumber - 1;\n        // Mark active phase as failed if incomplete\n        if (newPhaseDetails[failingPhaseIndex] && newPhaseDetails[failingPhaseIndex].status !== \"completed\") {\n          newPhaseDetails[failingPhaseIndex].status = \"failed\";\n        }\n        // Reset subsequent phases to pending\n        for (let i = newPhaseNumber; i < phases.length; i++) {\n          if (newPhaseDetails[i]) {\n            newPhaseDetails[i].status = \"pending\";\n            newPhaseDetails[i].progress = 0;\n          }\n        }\n      }\n      return newPhaseDetails;\n    });\n  };\n\n  // Fetch report results\n  const fetchReportResults = async id => {\n    try {\n      const response = await axios.get(`/cia/reports/${id}`);\n      setReportResults(response.data);\n    } catch (error) {\n      console.error(\"Error fetching report results:\", error);\n      setErrors(prev => ({\n        ...prev,\n        results: \"Failed to fetch report results. Please try refreshing the page.\"\n      }));\n    }\n  };\n\n  // Check if all phases are complete\n  const areAllPhasesComplete = () => {\n    if (phaseDetails.length !== phases.length) return false;\n    return phaseDetails.every(phase => phase.status === \"completed\" && phase.progress === 100);\n  };\n\n  /* ------------------------------------------------------------------\n   * Form helpers\n   * ------------------------------------------------------------------ */\n\n  // Handle input changes\n  const handleChange = (field, value) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n    if (errors[field]) {\n      setErrors(prev => {\n        const newErr = {\n          ...prev\n        };\n        delete newErr[field];\n        return newErr;\n      });\n    }\n  };\n\n  // Validate form\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.companyName.trim()) {\n      newErrors.companyName = \"Company name is required\";\n    }\n    if (!formData.websiteUrl.trim()) {\n      newErrors.websiteUrl = \"Website URL is required\";\n    } else {\n      // Allow inputs like example.com or www.example.com without requiring http/https\n      // Strip protocol and www for validation purposes\n      const normalized = formData.websiteUrl.replace(/^(https?:\\/\\/)?/i, \"\").replace(/^www\\./i, \"\");\n\n      // Very basic domain check: something.something (at least one dot and valid chars)\n      console.log(\"Original URL:\", formData.websiteUrl);\n      console.log(\"Normalized URL for regex test:\", normalized);\n      const domainRegex = /^[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)+$/;\n      console.log(\"Regex test result:\", domainRegex.test(normalized));\n      if (!domainRegex.test(normalized)) {\n        newErrors.websiteUrl = \"Please enter a valid website address (e.g., example.com)\";\n      }\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Submit form\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!validateForm()) return;\n    setIsSubmitting(true);\n    setErrors({});\n    setPhaseDetails([]);\n    setReportProgress(0);\n    setCurrentPhase(0);\n    setReportResults(null);\n    try {\n      const response = await axios.post(\"/cia/reports\", {\n        name: `${formData.companyName} Intelligence Report`,\n        description: `CIA report for ${formData.companyName}`,\n        initialData: {\n          companyName: formData.companyName,\n          websiteUrl: formData.websiteUrl.startsWith(\"http\") ? formData.websiteUrl : `https://${formData.websiteUrl}`,\n          keyPersonOfInfluence: formData.keyPersonOfInfluence ? {\n            name: formData.keyPersonOfInfluence,\n            role: \"Key Person of Influence\"\n          } : {},\n          primaryKeyword: formData.primaryKeyword\n        }\n      });\n      const {\n        id\n      } = response.data.report;\n      setReportId(id);\n      setIsSubmitted(true);\n      setReportStatus(\"processing\");\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error(\"Error submitting CIA report:\", error);\n      setErrors({\n        submit: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"Failed to submit report. Please try again.\"\n      });\n      setReportStatus(\"failed\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Export report\n  const exportReport = async format => {\n    setExportLoading(prev => ({\n      ...prev,\n      [format]: true\n    }));\n    setExportError(null);\n    try {\n      var _response$data;\n      const response = await axios.post(`/cia/reports/${reportId}/export`, {\n        format\n      });\n      if (!((_response$data = response.data) !== null && _response$data !== void 0 && _response$data.exportUrl)) {\n        throw new Error(\"Missing export URL\");\n      }\n      let fullUrl = response.data.exportUrl;\n      if (fullUrl.startsWith(\"/\")) {\n        fullUrl = `${window.location.origin}${fullUrl}`;\n      }\n      if (format === \"pdf\") {\n        const link = document.createElement(\"a\");\n        link.href = fullUrl;\n        link.download = `${formData.companyName}_CIA_Report.pdf`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n      } else {\n        window.open(fullUrl, \"_blank\");\n      }\n    } catch (error) {\n      let msg = `Failed to export as ${format}. `;\n      if (error.response) {\n        msg += `Server responded ${error.response.status}`;\n      } else if (error.request) {\n        msg += \"No response from server.\";\n      } else {\n        msg += error.message;\n      }\n      setExportError(msg);\n    } finally {\n      setExportLoading(prev => ({\n        ...prev,\n        [format]: false\n      }));\n    }\n  };\n\n  // Effect to handle polling\n  useEffect(() => {\n    if (reportId && reportStatus === \"processing\") {\n      if (pollTimeoutRef.current) {\n        clearTimeout(pollTimeoutRef.current);\n      }\n      setCurrentPollInterval(initialPollInterval);\n      pollTimeoutRef.current = setTimeout(() => pollReportStatus(reportId, initialPollInterval), initialPollInterval);\n    }\n    return () => {\n      if (pollTimeoutRef.current) {\n        clearTimeout(pollTimeoutRef.current);\n      }\n    };\n  }, [reportId, reportStatus]);\n\n  // Render form \n  const renderForm = () => /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"company-name\",\n          children: \"Company Name *\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          id: \"company-name\",\n          value: formData.companyName,\n          onChange: e => handleChange(\"companyName\", e.target.value),\n          placeholder: \"e.g. Acme Corporation\",\n          className: errors.companyName ? \"border-destructive\" : \"\",\n          disabled: isSubmitting\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this), errors.companyName && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-destructive\",\n          children: errors.companyName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"website-url\",\n          children: \"Website URL *\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          id: \"website-url\",\n          value: formData.websiteUrl,\n          onChange: e => handleChange(\"websiteUrl\", e.target.value),\n          placeholder: \"e.g. https://www.example.com\",\n          className: errors.websiteUrl ? \"border-destructive\" : \"\",\n          disabled: isSubmitting\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 11\n        }, this), errors.websiteUrl && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-destructive\",\n          children: errors.websiteUrl\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"kpoi\",\n          children: \"Key Person of Influence (Optional)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          id: \"kpoi\",\n          value: formData.keyPersonOfInfluence,\n          onChange: e => handleChange(\"keyPersonOfInfluence\", e.target.value),\n          placeholder: \"e.g. John Smith, CEO\",\n          disabled: isSubmitting\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs text-muted-foreground\",\n          children: \"The main person associated with your brand\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"primary-keyword\",\n          children: \"Primary Keyword (Optional)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          id: \"primary-keyword\",\n          value: formData.primaryKeyword,\n          onChange: e => handleChange(\"primaryKeyword\", e.target.value),\n          placeholder: \"e.g. digital marketing services\",\n          disabled: isSubmitting\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs text-muted-foreground\",\n          children: \"Main keyword you want to rank for\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 9\n      }, this), errors.submit && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-3 bg-destructive/10 border border-destructive rounded-md\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-destructive flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n            className: \"h-4 w-4 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 15\n          }, this), errors.submit]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        className: \"w-full\",\n        disabled: isSubmitting,\n        children: isSubmitting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Loader2, {\n            className: \"mr-2 h-4 w-4 animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 15\n          }, this), \"Submitting...\"]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [\"Generate CIA Report\", /*#__PURE__*/_jsxDEV(FileText, {\n            className: \"ml-2 h-4 w-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 365,\n    columnNumber: 5\n  }, this);\n\n  // Render progress\n  const renderProgress = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium\",\n        children: reportStatus === \"completed\" ? \"Your CIA Report is Ready!\" : reportStatus === \"failed\" ? \"Report Generation Failed\" : \"Generating Your CIA Report...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-muted-foreground\",\n        children: reportStatus === \"completed\" ? \"Your comprehensive marketing intelligence report has been generated. You can now export it in various formats.\" : reportStatus === \"failed\" ? \"There was an error generating your report. Please check the error details below.\" : \"Our AI is analyzing your company data across all 6 phases. This may take a few minutes.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between text-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Overall Progress\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [reportProgress, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full bg-muted rounded-full h-2.5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: cn(\"h-2.5 rounded-full\", reportStatus === \"completed\" ? \"bg-green-500\" : reportStatus === \"failed\" ? \"bg-destructive\" : \"bg-primary animate-pulse\"),\n          style: {\n            width: `${reportProgress}%`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-sm font-medium\",\n        children: \"CIA Workflow Phases\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 9\n      }, this), phases.map((phase, index) => {\n        const phaseInfo = phaseDetails[index] || {\n          progress: 0,\n          status: \"pending\"\n        };\n        let displayStatus = phaseInfo.status;\n        let displayProgress = phaseInfo.progress;\n        if (reportStatus === \"processing\") {\n          if (index < currentPhase - 1) {\n            displayStatus = \"completed\";\n            displayProgress = 100;\n          } else if (index === currentPhase - 1) {\n            displayStatus = \"processing\";\n            displayProgress = phaseInfo.progress; // Use actual progress from API\n          } else {\n            displayStatus = \"pending\";\n            displayProgress = 0;\n          }\n        } else if (reportStatus === \"completed\") {\n          displayStatus = \"completed\";\n          displayProgress = 100;\n        } else if (reportStatus === \"failed\") {\n          if (index < currentPhase - 1) {\n            // Phases before the failing one\n            displayStatus = \"completed\";\n            displayProgress = 100;\n          } else if (index === currentPhase - 1) {\n            // The phase that might have failed\n            displayStatus = phaseInfo.status === \"completed\" ? \"completed\" : \"failed\";\n            displayProgress = phaseInfo.progress;\n          } else {\n            // Subsequent phases\n            displayStatus = \"pending\";\n            displayProgress = 0;\n          }\n        }\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"flex items-center\",\n              children: [displayStatus === \"completed\" ? /*#__PURE__*/_jsxDEV(CheckCircle2, {\n                className: \"h-4 w-4 text-green-500 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 533,\n                columnNumber: 21\n              }, this) : displayStatus === \"processing\" ? /*#__PURE__*/_jsxDEV(Loader2, {\n                className: \"h-4 w-4 text-primary mr-2 animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 535,\n                columnNumber: 21\n              }, this) : displayStatus === \"failed\" ? /*#__PURE__*/_jsxDEV(AlertCircle, {\n                className: \"h-4 w-4 text-destructive mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 537,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-4 w-4 rounded-full border border-muted-foreground mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 539,\n                columnNumber: 21\n              }, this), phase.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 531,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [displayProgress, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 543,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full bg-muted rounded-full h-1.5\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: cn(\"h-1.5 rounded-full\", displayStatus === \"completed\" ? \"bg-green-500\" : displayStatus === \"failed\" ? \"bg-destructive\" : displayStatus === \"processing\" ? \"bg-primary\" : \"bg-muted-foreground\"),\n              style: {\n                width: `${displayProgress}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 546,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-muted-foreground\",\n            children: phase.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 556,\n            columnNumber: 15\n          }, this)]\n        }, phase.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 492,\n      columnNumber: 7\n    }, this), reportStatus === \"failed\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 bg-destructive/10 border border-destructive rounded-md\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-start space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n          className: \"h-5 w-5 text-destructive mt-0.5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"font-medium text-destructive\",\n            children: \"Report Generation Failed\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 568,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-muted-foreground mt-1\",\n            children: errors.report || errors.submit || \"An unexpected error occurred. Please try again or contact support.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 569,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline\",\n            className: \"mt-4\",\n            onClick: () => {\n              setIsSubmitted(false);\n              setReportStatus(\"idle\");\n              setReportProgress(0);\n              setCurrentPhase(0);\n              setPhaseDetails([]);\n              setReportResults(null);\n              setErrors({});\n              setReportId(null);\n              setFormData({\n                companyName: \"\",\n                websiteUrl: \"\",\n                keyPersonOfInfluence: \"\",\n                primaryKeyword: \"\"\n              });\n            },\n            children: \"Try Again\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 572,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 565,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 564,\n      columnNumber: 9\n    }, this), reportStatus === \"completed\" && reportProgress === 100 && areAllPhasesComplete() && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4 pt-4 border-t\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-sm font-medium\",\n        children: \"Export Options\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 597,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col sm:flex-row gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          onClick: () => exportReport(\"pdf\"),\n          disabled: exportLoading.pdf,\n          className: \"flex-1\",\n          children: [exportLoading.pdf ? /*#__PURE__*/_jsxDEV(Loader2, {\n            className: \"mr-2 h-4 w-4 animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 607,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(Download, {\n            className: \"mr-2 h-4 w-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 609,\n            columnNumber: 17\n          }, this), \"Export as PDF\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 600,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          onClick: () => exportReport(\"google_sheets\"),\n          disabled: exportLoading.sheets,\n          className: \"flex-1\",\n          children: [exportLoading.sheets ? /*#__PURE__*/_jsxDEV(Loader2, {\n            className: \"mr-2 h-4 w-4 animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 621,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(FileSpreadsheet, {\n            className: \"mr-2 h-4 w-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 623,\n            columnNumber: 17\n          }, this), \"Export to Google Sheets\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 614,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          onClick: () => exportReport(\"notion\"),\n          disabled: exportLoading.notion,\n          className: \"flex-1\",\n          children: [exportLoading.notion ? /*#__PURE__*/_jsxDEV(Loader2, {\n            className: \"mr-2 h-4 w-4 animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 635,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(Database, {\n            className: \"mr-2 h-4 w-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 637,\n            columnNumber: 17\n          }, this), \"Export to Notion\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 628,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 599,\n        columnNumber: 11\n      }, this), exportError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-3 bg-destructive/10 border border-destructive rounded-md\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-destructive flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n            className: \"h-4 w-4 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 646,\n            columnNumber: 17\n          }, this), exportError]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 645,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 644,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 596,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 455,\n    columnNumber: 5\n  }, this);\n\n  // Main component render\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto py-8 px-4 md:px-6\",\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      className: \"w-full max-w-4xl mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n          className: \"flex items-center\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"gradient-text\",\n            children: \"CIA Wizard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 662,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 661,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n          children: \"The Colossal Intelligence Arsenal will gather and process data to create your \\\"Master Content Bible\\\"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 664,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 660,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n        children: isSubmitted || reportStatus === \"processing\" || reportStatus === \"completed\" || reportStatus === \"failed\" ? renderProgress() : renderForm()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 669,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardFooter, {\n        className: \"flex justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-muted-foreground\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(Building2, {\n              className: \"h-3 w-3 mr-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 676,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: formData.companyName || \"Your Company\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 677,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 675,\n            columnNumber: 13\n          }, this), formData.websiteUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center mt-1\",\n            children: [/*#__PURE__*/_jsxDEV(Globe, {\n              className: \"h-3 w-3 mr-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 681,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: formData.websiteUrl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 682,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 680,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 674,\n          columnNumber: 11\n        }, this), (reportStatus === \"completed\" || reportStatus === \"failed\") && !isSubmitting && /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          onClick: () => {\n            setIsSubmitted(false);\n            setReportStatus(\"idle\");\n            setReportProgress(0);\n            setCurrentPhase(0);\n            setPhaseDetails([]);\n            setReportResults(null);\n            setErrors({});\n            setReportId(null);\n            setFormData({\n              companyName: \"\",\n              websiteUrl: \"\",\n              keyPersonOfInfluence: \"\",\n              primaryKeyword: \"\"\n            });\n          },\n          children: \"Start New Report\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 687,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 673,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 659,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 658,\n    columnNumber: 5\n  }, this);\n};\n_s(CIAWizard, \"fDyDsjKkCbFJUY6AnVgfMHQoXdk=\");\n_c = CIAWizard;\nexport default CIAWizard;\nvar _c;\n$RefreshReg$(_c, \"CIAWizard\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","AlertCircle","Building2","Globe","FileText","Download","FileSpreadsheet","Database","Loader2","CheckCircle2","Button","Input","Label","Card","CardHeader","CardTitle","CardDescription","CardContent","CardFooter","cn","jsxDEV","_jsxDEV","Fragment","_Fragment","CIAWizard","_s","formData","setFormData","companyName","websiteUrl","keyPersonOfInfluence","primaryKeyword","isSubmitting","setIsSubmitting","isSubmitted","setIsSubmitted","errors","setErrors","reportId","setReportId","reportStatus","setReportStatus","reportProgress","setReportProgress","currentPhase","setCurrentPhase","phaseDetails","setPhaseDetails","reportResults","setReportResults","currentPollInterval","setCurrentPollInterval","exportLoading","setExportLoading","pdf","sheets","notion","exportError","setExportError","initialPollInterval","maxPollInterval","pollTimeoutRef","phases","id","name","description","pollReportStatus","currentInterval","response","get","status","progress","newPhaseNumber","phaseProgress","reportErrors","data","updatePhaseDetails","fetchReportResults","length","prevErrors","report","map","err","stage","message","join","current","clearTimeout","nextInterval","Math","min","setTimeout","error","console","warn","phaseProgressFromServer","currentStatus","prevDetails","newPhaseDetails","p","phase","i","currentPhaseIndex","failingPhaseIndex","prev","results","areAllPhasesComplete","every","handleChange","field","value","newErr","validateForm","newErrors","trim","normalized","replace","log","domainRegex","test","Object","keys","handleSubmit","e","preventDefault","post","initialData","startsWith","role","_error$response","_error$response$data","submit","exportReport","format","_response$data","exportUrl","Error","fullUrl","window","location","origin","link","document","createElement","href","download","body","appendChild","click","removeChild","open","msg","request","renderForm","onSubmit","children","className","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","onChange","target","placeholder","disabled","type","renderProgress","style","width","index","phaseInfo","displayStatus","displayProgress","variant","onClick","_c","$RefreshReg$"],"sources":["/Users/rodericandrews/Factory-ai/waterfall-app/client/src/components/CIA/CIAWizard.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport axios from \"../../utils/axios\";\n// Import other dependencies\nimport {\n  AlertCircle,\n  Building2,\n  Globe,\n  FileText,\n  Download,\n  FileSpreadsheet,\n  Database,\n  Loader2,\n  CheckCircle2\n} from \"lucide-react\";\nimport { Button } from \"../ui/button\";\nimport { Input } from \"../ui/input\";\nimport { Label } from \"../ui/label\";\nimport {\n  Card,\n  CardHeader,\n  CardTitle,\n  CardDescription,\n  CardContent,\n  CardFooter\n} from \"../ui/card\";\nimport { cn } from \"../../lib/utils\";\n\nconst CIAWizard = () => {\n  // State declarations\n  const [formData, setFormData] = useState({\n    companyName: \"\",\n    websiteUrl: \"\",\n    keyPersonOfInfluence: \"\",\n    primaryKeyword: \"\"\n  });\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const [errors, setErrors] = useState({});\n  const [reportId, setReportId] = useState(null);\n  const [reportStatus, setReportStatus] = useState(\"idle\");\n  const [reportProgress, setReportProgress] = useState(0);\n  const [currentPhase, setCurrentPhase] = useState(0);\n  const [phaseDetails, setPhaseDetails] = useState([]);\n  const [reportResults, setReportResults] = useState(null);\n  const [currentPollInterval, setCurrentPollInterval] = useState(5000);\n  const [exportLoading, setExportLoading] = useState({\n    pdf: false,\n    sheets: false,\n    notion: false\n  });\n  const [exportError, setExportError] = useState(null);\n\n  // Constants\n  const initialPollInterval = 5000;\n  const maxPollInterval = 60000;\n  const pollTimeoutRef = useRef(null);\n\n  // Define phases\n  const phases = [\n    { id: 1, name: \"Business Intelligence\", description: \"Analyzing company data and market position\" },\n    { id: 2, name: \"SEO & Social Intelligence\", description: \"Researching keywords and competitive landscape\" },\n    { id: 3, name: \"Strategic Synthesis\", description: \"Combining insights for strategic recommendations\" },\n    { id: 4, name: \"Golden Hippo Offer\", description: \"Developing tiered pricing and value stacks\" },\n    { id: 5, name: \"Convergence Blender\", description: \"Creating 12-week content calendar\" },\n    { id: 6, name: \"Master Content Bible\", description: \"Finalizing implementation roadmap\" }\n  ];\n\n  // Poll for report status updates - FIXED VERSION WITH PROPER PARENTHESES\n  const pollReportStatus = async (id, currentInterval) => {\n    try {\n      const response = await axios.get(`/cia/reports/${id}/status`);\n      const { status, progress, currentPhase: newPhaseNumber, phaseProgress, errors: reportErrors } = response.data;\n\n      setReportStatus(status);\n      setReportProgress(progress);\n\n      if (newPhaseNumber) {\n        setCurrentPhase(newPhaseNumber);\n        updatePhaseDetails(newPhaseNumber, phaseProgress, status);\n      }\n\n      if (status === \"completed\" || status === \"failed\") {\n        if (status === \"completed\") {\n          fetchReportResults(id);\n        } else if (status === \"failed\" && reportErrors && reportErrors.length > 0) {\n          setErrors(prevErrors => ({\n            ...prevErrors,\n            report: reportErrors.map(err => `${err.stage}: ${err.message}`).join(\", \")\n          }));\n        }\n        if (pollTimeoutRef.current) {\n          clearTimeout(pollTimeoutRef.current);\n        }\n        return;\n      }\n\n      // If still processing, schedule next poll with exponential backoff\n      const nextInterval = Math.min(currentInterval * 2, maxPollInterval);\n      setCurrentPollInterval(nextInterval);\n      pollTimeoutRef.current = setTimeout(() => pollReportStatus(id, nextInterval), nextInterval);\n\n    } catch (error) {\n      console.error(\"Error polling report status:\", error);\n      let nextInterval = currentInterval;\n      \n      if (error.response && error.response.status === 429) {\n        console.warn(\"Rate limited. Increasing poll interval significantly.\");\n        nextInterval = maxPollInterval;\n      } else {\n        nextInterval = Math.min(currentInterval * 2, maxPollInterval);\n      }\n      \n      setCurrentPollInterval(nextInterval);\n      \n      if (reportStatus !== \"completed\" && reportStatus !== \"failed\") {\n        pollTimeoutRef.current = setTimeout(() => pollReportStatus(id, nextInterval), nextInterval);\n      }\n    }\n  };\n\n  // Function to update phaseDetails based on API response\n  const updatePhaseDetails = (\n    newPhaseNumber,\n    phaseProgressFromServer,\n    currentStatus\n  ) => {\n    setPhaseDetails(prevDetails => {\n      let newPhaseDetails = [...prevDetails];\n\n      // Initialize array if empty\n      if (newPhaseDetails.length === 0) {\n        newPhaseDetails = phases.map(p => ({\n          id: p.id,\n          name: p.name,\n          progress: 0,\n          status: \"pending\"\n        }));\n      }\n\n      // If report is fully completed, mark every phase complete\n      if (currentStatus === \"completed\") {\n        return newPhaseDetails.map(phase => ({\n          ...phase,\n          progress: 100,\n          status: \"completed\"\n        }));\n      }\n\n      // Mark previous phases as completed\n      for (let i = 0; i < newPhaseNumber - 1; i++) {\n        if (newPhaseDetails[i]) {\n          newPhaseDetails[i] = {\n            ...newPhaseDetails[i],\n            progress: 100,\n            status: \"completed\"\n          };\n        }\n      }\n\n      // Update the current phase entry\n      if (newPhaseNumber > 0 && newPhaseNumber <= phases.length) {\n        const currentPhaseIndex = newPhaseNumber - 1;\n        newPhaseDetails[currentPhaseIndex] = {\n          ...newPhaseDetails[currentPhaseIndex],\n          progress: phaseProgressFromServer ?? 0,\n          status:\n            phaseProgressFromServer >= 100 ? \"completed\" : \"processing\"\n        };\n      }\n\n      // Handle failure status\n      if (currentStatus === \"failed\" && newPhaseNumber > 0) {\n        const failingPhaseIndex = newPhaseNumber - 1;\n        // Mark active phase as failed if incomplete\n        if (\n          newPhaseDetails[failingPhaseIndex] &&\n          newPhaseDetails[failingPhaseIndex].status !== \"completed\"\n        ) {\n          newPhaseDetails[failingPhaseIndex].status = \"failed\";\n        }\n        // Reset subsequent phases to pending\n        for (let i = newPhaseNumber; i < phases.length; i++) {\n          if (newPhaseDetails[i]) {\n            newPhaseDetails[i].status = \"pending\";\n            newPhaseDetails[i].progress = 0;\n          }\n        }\n      }\n\n      return newPhaseDetails;\n    });\n  };\n\n  // Fetch report results\n  const fetchReportResults = async id => {\n    try {\n      const response = await axios.get(`/cia/reports/${id}`);\n      setReportResults(response.data);\n    } catch (error) {\n      console.error(\"Error fetching report results:\", error);\n      setErrors(prev => ({\n        ...prev,\n        results:\n          \"Failed to fetch report results. Please try refreshing the page.\"\n      }));\n    }\n  };\n\n  // Check if all phases are complete\n  const areAllPhasesComplete = () => {\n    if (phaseDetails.length !== phases.length) return false;\n    return phaseDetails.every(\n      phase => phase.status === \"completed\" && phase.progress === 100\n    );\n  };\n\n  /* ------------------------------------------------------------------\n   * Form helpers\n   * ------------------------------------------------------------------ */\n\n  // Handle input changes\n  const handleChange = (field, value) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n    if (errors[field]) {\n      setErrors(prev => {\n        const newErr = { ...prev };\n        delete newErr[field];\n        return newErr;\n      });\n    }\n  };\n\n  // Validate form\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.companyName.trim()) {\n      newErrors.companyName = \"Company name is required\";\n    }\n    if (!formData.websiteUrl.trim()) {\n      newErrors.websiteUrl = \"Website URL is required\";\n    } else {\n      // Allow inputs like example.com or www.example.com without requiring http/https\n      // Strip protocol and www for validation purposes\n      const normalized = formData.websiteUrl\n        .replace(/^(https?:\\/\\/)?/i, \"\")\n        .replace(/^www\\./i, \"\");\n\n      // Very basic domain check: something.something (at least one dot and valid chars)\n      console.log(\"Original URL:\", formData.websiteUrl);\n      console.log(\"Normalized URL for regex test:\", normalized);\n      const domainRegex = /^[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)+$/;\n      console.log(\"Regex test result:\", domainRegex.test(normalized));\n      if (!domainRegex.test(normalized)) {\n        newErrors.websiteUrl =\n          \"Please enter a valid website address (e.g., example.com)\";\n      }\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Submit form\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!validateForm()) return;\n\n    setIsSubmitting(true);\n    setErrors({});\n    setPhaseDetails([]);\n    setReportProgress(0);\n    setCurrentPhase(0);\n    setReportResults(null);\n\n    try {\n      const response = await axios.post(\"/cia/reports\", {\n        name: `${formData.companyName} Intelligence Report`,\n        description: `CIA report for ${formData.companyName}`,\n        initialData: {\n          companyName: formData.companyName,\n          websiteUrl: formData.websiteUrl.startsWith(\"http\")\n            ? formData.websiteUrl\n            : `https://${formData.websiteUrl}`,\n          keyPersonOfInfluence: formData.keyPersonOfInfluence\n            ? { name: formData.keyPersonOfInfluence, role: \"Key Person of Influence\" }\n            : {},\n          primaryKeyword: formData.primaryKeyword\n        }\n      });\n      const { id } = response.data.report;\n      setReportId(id);\n      setIsSubmitted(true);\n      setReportStatus(\"processing\");\n    } catch (error) {\n      console.error(\"Error submitting CIA report:\", error);\n      setErrors({\n        submit:\n          error.response?.data?.message ||\n          \"Failed to submit report. Please try again.\"\n      });\n      setReportStatus(\"failed\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Export report\n  const exportReport = async format => {\n    setExportLoading(prev => ({ ...prev, [format]: true }));\n    setExportError(null);\n    try {\n      const response = await axios.post(`/cia/reports/${reportId}/export`, {\n        format\n      });\n      if (!response.data?.exportUrl) {\n        throw new Error(\"Missing export URL\");\n      }\n      let fullUrl = response.data.exportUrl;\n      if (fullUrl.startsWith(\"/\")) {\n        fullUrl = `${window.location.origin}${fullUrl}`;\n      }\n      if (format === \"pdf\") {\n        const link = document.createElement(\"a\");\n        link.href = fullUrl;\n        link.download = `${formData.companyName}_CIA_Report.pdf`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n      } else {\n        window.open(fullUrl, \"_blank\");\n      }\n    } catch (error) {\n      let msg = `Failed to export as ${format}. `;\n      if (error.response) {\n        msg += `Server responded ${error.response.status}`;\n      } else if (error.request) {\n        msg += \"No response from server.\";\n      } else {\n        msg += error.message;\n      }\n      setExportError(msg);\n    } finally {\n      setExportLoading(prev => ({ ...prev, [format]: false }));\n    }\n  };\n\n  // Effect to handle polling\n  useEffect(() => {\n    if (reportId && reportStatus === \"processing\") {\n      if (pollTimeoutRef.current) {\n        clearTimeout(pollTimeoutRef.current);\n      }\n      setCurrentPollInterval(initialPollInterval);\n      pollTimeoutRef.current = setTimeout(() => pollReportStatus(reportId, initialPollInterval), initialPollInterval);\n    }\n    \n    return () => {\n      if (pollTimeoutRef.current) {\n        clearTimeout(pollTimeoutRef.current);\n      }\n    };\n  }, [reportId, reportStatus]);\n\n  // Render form \n  const renderForm = () => (\n    <form onSubmit={handleSubmit}>\n      <div className=\"space-y-4\">\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"company-name\">Company Name *</Label>\n          <Input\n            id=\"company-name\"\n            value={formData.companyName}\n            onChange={(e) => handleChange(\"companyName\", e.target.value)}\n            placeholder=\"e.g. Acme Corporation\"\n            className={errors.companyName ? \"border-destructive\" : \"\"}\n            disabled={isSubmitting}\n          />\n          {errors.companyName && (\n            <p className=\"text-sm text-destructive\">{errors.companyName}</p>\n          )}\n        </div>\n        \n        <div className=\"space-y-2\">\n          <Label htmlFor=\"website-url\">Website URL *</Label>\n          <Input\n            id=\"website-url\"\n            value={formData.websiteUrl}\n            onChange={(e) => handleChange(\"websiteUrl\", e.target.value)}\n            placeholder=\"e.g. https://www.example.com\"\n            className={errors.websiteUrl ? \"border-destructive\" : \"\"}\n            disabled={isSubmitting}\n          />\n          {errors.websiteUrl && (\n            <p className=\"text-sm text-destructive\">{errors.websiteUrl}</p>\n          )}\n        </div>\n        \n        <div className=\"space-y-2\">\n          <Label htmlFor=\"kpoi\">Key Person of Influence (Optional)</Label>\n          <Input\n            id=\"kpoi\"\n            value={formData.keyPersonOfInfluence}\n            onChange={(e) => handleChange(\"keyPersonOfInfluence\", e.target.value)}\n            placeholder=\"e.g. John Smith, CEO\"\n            disabled={isSubmitting}\n          />\n          <p className=\"text-xs text-muted-foreground\">The main person associated with your brand</p>\n        </div>\n        \n        <div className=\"space-y-2\">\n          <Label htmlFor=\"primary-keyword\">Primary Keyword (Optional)</Label>\n          <Input\n            id=\"primary-keyword\"\n            value={formData.primaryKeyword}\n            onChange={(e) => handleChange(\"primaryKeyword\", e.target.value)}\n            placeholder=\"e.g. digital marketing services\"\n            disabled={isSubmitting}\n          />\n          <p className=\"text-xs text-muted-foreground\">Main keyword you want to rank for</p>\n        </div>\n        \n        {errors.submit && (\n          <div className=\"p-3 bg-destructive/10 border border-destructive rounded-md\">\n            <p className=\"text-sm text-destructive flex items-center\">\n              <AlertCircle className=\"h-4 w-4 mr-2\" />\n              {errors.submit}\n            </p>\n          </div>\n        )}\n      </div>\n      \n      <div className=\"mt-6\">\n        <Button \n          type=\"submit\" \n          className=\"w-full\" \n          disabled={isSubmitting}\n        >\n          {isSubmitting ? (\n            <>\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              Submitting...\n            </>\n          ) : (\n            <>\n              Generate CIA Report\n              <FileText className=\"ml-2 h-4 w-4\" />\n            </>\n          )}\n        </Button>\n      </div>\n    </form>\n  );\n\n  // Render progress\n  const renderProgress = () => (\n    <div className=\"space-y-6\">\n      <div className=\"space-y-2\">\n        <h3 className=\"text-lg font-medium\">\n          {reportStatus === \"completed\" \n            ? \"Your CIA Report is Ready!\" \n            : reportStatus === \"failed\"\n            ? \"Report Generation Failed\"\n            : \"Generating Your CIA Report...\"}\n        </h3>\n        <p className=\"text-sm text-muted-foreground\">\n          {reportStatus === \"completed\"\n            ? \"Your comprehensive marketing intelligence report has been generated. You can now export it in various formats.\"\n            : reportStatus === \"failed\"\n            ? \"There was an error generating your report. Please check the error details below.\"\n            : \"Our AI is analyzing your company data across all 6 phases. This may take a few minutes.\"}\n        </p>\n      </div>\n      \n      {/* Overall progress */}\n      <div className=\"space-y-2\">\n        <div className=\"flex justify-between text-sm\">\n          <span>Overall Progress</span>\n          <span>{reportProgress}%</span>\n        </div>\n        <div className=\"w-full bg-muted rounded-full h-2.5\">\n          <div\n            className={cn(\n              \"h-2.5 rounded-full\",\n              reportStatus === \"completed\" ? \"bg-green-500\" : \n              reportStatus === \"failed\" ? \"bg-destructive\" : \"bg-primary animate-pulse\"\n            )}\n            style={{ width: `${reportProgress}%` }}\n          ></div>\n        </div>\n      </div>\n      \n      {/* Phase progress */}\n      <div className=\"space-y-4\">\n        <h4 className=\"text-sm font-medium\">CIA Workflow Phases</h4>\n        \n        {phases.map((phase, index) => {\n          const phaseInfo = phaseDetails[index] || { progress: 0, status: \"pending\" };\n          \n          let displayStatus = phaseInfo.status;\n          let displayProgress = phaseInfo.progress;\n\n          if (reportStatus === \"processing\") {\n            if (index < currentPhase - 1) {\n                displayStatus = \"completed\";\n                displayProgress = 100;\n            } else if (index === currentPhase - 1) {\n                displayStatus = \"processing\";\n                displayProgress = phaseInfo.progress; // Use actual progress from API\n            } else {\n                displayStatus = \"pending\";\n                displayProgress = 0;\n            }\n          } else if (reportStatus === \"completed\") {\n            displayStatus = \"completed\";\n            displayProgress = 100;\n          } else if (reportStatus === \"failed\") {\n            if (index < currentPhase - 1) { // Phases before the failing one\n                displayStatus = \"completed\";\n                displayProgress = 100;\n            } else if (index === currentPhase - 1) { // The phase that might have failed\n                displayStatus = phaseInfo.status === \"completed\" ? \"completed\" : \"failed\";\n                displayProgress = phaseInfo.progress;\n            } else { // Subsequent phases\n                displayStatus = \"pending\";\n                displayProgress = 0;\n            }\n          }\n          \n          return (\n            <div key={phase.id} className=\"space-y-1\">\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"flex items-center\">\n                  {displayStatus === \"completed\" ? (\n                    <CheckCircle2 className=\"h-4 w-4 text-green-500 mr-2\" />\n                  ) : displayStatus === \"processing\" ? (\n                    <Loader2 className=\"h-4 w-4 text-primary mr-2 animate-spin\" />\n                  ) : displayStatus === \"failed\" ? (\n                    <AlertCircle className=\"h-4 w-4 text-destructive mr-2\" />\n                  ) : (\n                    <div className=\"h-4 w-4 rounded-full border border-muted-foreground mr-2\" />\n                  )}\n                  {phase.name}\n                </span>\n                <span>{displayProgress}%</span>\n              </div>\n              <div className=\"w-full bg-muted rounded-full h-1.5\">\n                <div\n                  className={cn(\n                    \"h-1.5 rounded-full\",\n                    displayStatus === \"completed\" ? \"bg-green-500\" : \n                    displayStatus === \"failed\" ? \"bg-destructive\" : \n                    displayStatus === \"processing\" ? \"bg-primary\" : \"bg-muted-foreground\"\n                  )}\n                  style={{ width: `${displayProgress}%` }}\n                ></div>\n              </div>\n              <p className=\"text-xs text-muted-foreground\">{phase.description}</p>\n            </div>\n          );\n        })}\n      </div>\n      \n      {/* Error message (visible when failed) */}\n      {reportStatus === \"failed\" && (\n        <div className=\"p-4 bg-destructive/10 border border-destructive rounded-md\">\n          <div className=\"flex items-start space-x-2\">\n            <AlertCircle className=\"h-5 w-5 text-destructive mt-0.5\" />\n            <div>\n              <h5 className=\"font-medium text-destructive\">Report Generation Failed</h5>\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                {errors.report || errors.submit || \"An unexpected error occurred. Please try again or contact support.\"}\n              </p>\n              <Button \n                variant=\"outline\" \n                className=\"mt-4\" \n                onClick={() => {\n                  setIsSubmitted(false);\n                  setReportStatus(\"idle\");\n                  setReportProgress(0);\n                  setCurrentPhase(0);\n                  setPhaseDetails([]);\n                  setReportResults(null);\n                  setErrors({});\n                  setReportId(null);\n                  setFormData({ companyName: \"\", websiteUrl: \"\", keyPersonOfInfluence: \"\", primaryKeyword: \"\" });\n                }}\n              >\n                Try Again\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {/* Export options (visible when completed AND all phases are at 100%) */}\n      {reportStatus === \"completed\" && reportProgress === 100 && areAllPhasesComplete() && (\n        <div className=\"space-y-4 pt-4 border-t\">\n          <h4 className=\"text-sm font-medium\">Export Options</h4>\n          \n          <div className=\"flex flex-col sm:flex-row gap-3\">\n            <Button \n              variant=\"outline\" \n              onClick={() => exportReport(\"pdf\")}\n              disabled={exportLoading.pdf}\n              className=\"flex-1\"\n            >\n              {exportLoading.pdf ? (\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              ) : (\n                <Download className=\"mr-2 h-4 w-4\" />\n              )}\n              Export as PDF\n            </Button>\n            \n            <Button \n              variant=\"outline\" \n              onClick={() => exportReport(\"google_sheets\")}\n              disabled={exportLoading.sheets}\n              className=\"flex-1\"\n            >\n              {exportLoading.sheets ? (\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              ) : (\n                <FileSpreadsheet className=\"mr-2 h-4 w-4\" />\n              )}\n              Export to Google Sheets\n            </Button>\n            \n            <Button \n              variant=\"outline\" \n              onClick={() => exportReport(\"notion\")}\n              disabled={exportLoading.notion}\n              className=\"flex-1\"\n            >\n              {exportLoading.notion ? (\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              ) : (\n                <Database className=\"mr-2 h-4 w-4\" />\n              )}\n              Export to Notion\n            </Button>\n          </div>\n          \n          {exportError && (\n            <div className=\"p-3 bg-destructive/10 border border-destructive rounded-md\">\n              <p className=\"text-sm text-destructive flex items-center\">\n                <AlertCircle className=\"h-4 w-4 mr-2\" />\n                {exportError}\n              </p>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n\n  // Main component render\n  return (\n    <div className=\"container mx-auto py-8 px-4 md:px-6\">\n      <Card className=\"w-full max-w-4xl mx-auto\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center\">\n            <span className=\"gradient-text\">CIA Wizard</span>\n          </CardTitle>\n          <CardDescription>\n            The Colossal Intelligence Arsenal will gather and process data to create your \"Master Content Bible\"\n          </CardDescription>\n        </CardHeader>\n        \n        <CardContent>\n          {isSubmitted || reportStatus === \"processing\" || reportStatus === \"completed\" || reportStatus === \"failed\" ? renderProgress() : renderForm()}\n        </CardContent>\n        \n        <CardFooter className=\"flex justify-between\">\n          <div className=\"text-xs text-muted-foreground\">\n            <div className=\"flex items-center\">\n              <Building2 className=\"h-3 w-3 mr-1\" />\n              <span>{formData.companyName || \"Your Company\"}</span>\n            </div>\n            {formData.websiteUrl && (\n              <div className=\"flex items-center mt-1\">\n                <Globe className=\"h-3 w-3 mr-1\" />\n                <span>{formData.websiteUrl}</span>\n              </div>\n            )}\n          </div>\n          {(reportStatus === \"completed\" || reportStatus === \"failed\") && !isSubmitting && (\n            <Button \n              variant=\"outline\" \n              onClick={() => {\n                setIsSubmitted(false);\n                setReportStatus(\"idle\");\n                setReportProgress(0);\n                setCurrentPhase(0);\n                setPhaseDetails([]);\n                setReportResults(null);\n                setErrors({});\n                setReportId(null);\n                setFormData({ companyName: \"\", websiteUrl: \"\", keyPersonOfInfluence: \"\", primaryKeyword: \"\" });\n              }}\n            >\n              Start New Report\n            </Button>\n          )}\n        </CardFooter>\n      </Card>\n    </div>\n  );\n};\n\nexport default CIAWizard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}