{"ast":null,"code":"var _jsxFileName = \"/Users/rodericandrews/Factory-ai/waterfall-app/client/src/components/CIA/CIAWizard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"../../utils/axios\";\nimport { CheckCircle2, AlertCircle, Building2, Globe, FileText, Download, FileSpreadsheet, Database, Loader2 } from \"lucide-react\";\n\n// Import shadcn/ui components\nimport { Button } from \"../ui/button\";\nimport { Input } from \"../ui/input\";\nimport { Label } from \"../ui/label\";\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent, CardFooter } from \"../ui/card\";\n\n// Utility functions\nimport { cn } from \"../../lib/utils\";\n\n/**\n * CIA Wizard - Simplified form for gathering company intelligence data\n * Collects minimal information needed to generate a comprehensive marketing intelligence report\n */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CIAWizard = () => {\n  _s();\n  // Form state\n  const [formData, setFormData] = useState({\n    companyName: \"\",\n    websiteUrl: \"\",\n    keyPersonOfInfluence: \"\",\n    primaryKeyword: \"\"\n  });\n\n  // Submission state\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const [errors, setErrors] = useState({});\n\n  // Report state\n  const [reportId, setReportId] = useState(null);\n  const [reportStatus, setReportStatus] = useState(\"idle\"); // idle, processing, completed, failed\n  const [reportProgress, setReportProgress] = useState(0);\n  const [currentPhase, setCurrentPhase] = useState(0);\n  const [phaseDetails, setPhaseDetails] = useState([]);\n  const [reportResults, setReportResults] = useState(null);\n  const [exportLoading, setExportLoading] = useState({\n    pdf: false,\n    sheets: false,\n    notion: false\n  });\n  const [exportError, setExportError] = useState(null);\n\n  // CIA workflow phases\n  const phases = [{\n    id: 1,\n    name: \"Business Intelligence\",\n    description: \"Analyzing company data and market position\"\n  }, {\n    id: 2,\n    name: \"SEO & Social Intelligence\",\n    description: \"Researching keywords and competitive landscape\"\n  }, {\n    id: 3,\n    name: \"Strategic Synthesis\",\n    description: \"Combining insights for strategic recommendations\"\n  }, {\n    id: 4,\n    name: \"Golden Hippo Offer\",\n    description: \"Developing tiered pricing and value stacks\"\n  }, {\n    id: 5,\n    name: \"Convergence Blender\",\n    description: \"Creating 12-week content calendar\"\n  }, {\n    id: 6,\n    name: \"Master Content Bible\",\n    description: \"Finalizing implementation roadmap\"\n  }];\n\n  // Handle input changes\n  const handleChange = (field, value) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n\n    // Clear error when field is updated\n    if (errors[field]) {\n      setErrors(prev => {\n        const newErrors = {\n          ...prev\n        };\n        delete newErrors[field];\n        return newErrors;\n      });\n    }\n  };\n\n  // Validate form\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.companyName.trim()) {\n      newErrors.companyName = \"Company name is required\";\n    }\n    if (!formData.websiteUrl.trim()) {\n      newErrors.websiteUrl = \"Website URL is required\";\n    } else if (!/^(https?:\\/\\/)?([a-zA-Z0-9-]+\\.)+[a-zA-Z0-9-]+(\\/[a-zA-Z0-9-._~:/?#[\\]@!$&'()*+,;=]*)?$/.test(formData.websiteUrl)) {\n      newErrors.websiteUrl = \"Please enter a valid URL\";\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Submit form\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!validateForm()) {\n      return;\n    }\n    setIsSubmitting(true);\n    try {\n      // Create a new CIA report\n      const response = await axios.post(\"/cia/reports\", {\n        name: `${formData.companyName} Intelligence Report`,\n        description: `CIA report for ${formData.companyName}`,\n        initialData: {\n          companyName: formData.companyName,\n          websiteUrl: formData.websiteUrl,\n          keyPersonOfInfluence: formData.keyPersonOfInfluence ? {\n            name: formData.keyPersonOfInfluence,\n            role: \"Key Person of Influence\"\n          } : {},\n          primaryKeyword: formData.primaryKeyword\n        }\n      });\n\n      // Get the report ID\n      const {\n        id\n      } = response.data.report;\n      setReportId(id);\n      setIsSubmitted(true);\n      setReportStatus(\"processing\");\n\n      // Begin polling for status updates\n      startStatusPolling(id);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error(\"Error submitting CIA report:\", error);\n      setErrors({\n        submit: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"Failed to submit report. Please try again.\"\n      });\n      setIsSubmitting(false);\n    }\n  };\n\n  // Poll for report status updates\n  const startStatusPolling = id => {\n    const pollInterval = setInterval(async () => {\n      try {\n        const response = await axios.get(`/cia/reports/${id}/status`);\n        const {\n          status,\n          progress,\n          currentPhase,\n          phaseProgress\n        } = response.data;\n        setReportStatus(status);\n        setReportProgress(progress);\n        if (currentPhase) {\n          setCurrentPhase(currentPhase);\n\n          // Update phase details\n          setPhaseDetails(prev => {\n            const updatedPhases = [...prev];\n            const phaseIndex = currentPhase - 1;\n            if (!updatedPhases[phaseIndex]) {\n              updatedPhases[phaseIndex] = {\n                id: currentPhase,\n                progress: phaseProgress || 0,\n                status: \"processing\"\n              };\n            } else {\n              updatedPhases[phaseIndex] = {\n                ...updatedPhases[phaseIndex],\n                // keep the max between existing and new progress\n                progress: Math.max(updatedPhases[phaseIndex].progress || 0, phaseProgress || 0),\n                status: (phaseProgress !== null && phaseProgress !== void 0 ? phaseProgress : updatedPhases[phaseIndex].progress) >= 100 ? \"completed\" : \"processing\"\n              };\n            }\n\n            // -----------------------------------------------------------------\n            // Ensure *all previous* phases are marked as completed (100 %)\n            // so their bars don't remain stuck at 0 %.\n            // -----------------------------------------------------------------\n            for (let i = 0; i < phaseIndex; i++) {\n              if (!updatedPhases[i]) {\n                updatedPhases[i] = {\n                  id: i + 1,\n                  progress: 100,\n                  status: \"completed\"\n                };\n              } else {\n                updatedPhases[i] = {\n                  ...updatedPhases[i],\n                  progress: 100,\n                  status: \"completed\"\n                };\n              }\n            }\n            return updatedPhases;\n          });\n        }\n\n        // If completed or failed, stop polling and fetch results\n        if (status === \"completed\" || status === \"failed\") {\n          clearInterval(pollInterval);\n          if (status === \"completed\") {\n            fetchReportResults(id);\n          }\n        }\n      } catch (error) {\n        console.error(\"Error polling report status:\", error);\n        // Don't stop polling on error, just log it\n      }\n    }, 3000); // Poll every 3 seconds\n\n    // Clean up interval on component unmount\n    return () => clearInterval(pollInterval);\n  };\n\n  // Fetch report results\n  const fetchReportResults = async id => {\n    try {\n      const response = await axios.get(`/cia/reports/${id}`);\n      setReportResults(response.data);\n    } catch (error) {\n      console.error(\"Error fetching report results:\", error);\n      setErrors({\n        results: \"Failed to fetch report results. Please try refreshing the page.\"\n      });\n    }\n  };\n\n  // Export report\n  const exportReport = async format => {\n    setExportLoading(prev => ({\n      ...prev,\n      [format]: true\n    }));\n    setExportError(null);\n    try {\n      console.log(`Starting export for format: ${format}, reportId: ${reportId}`);\n      const response = await axios.post(`/cia/reports/${reportId}/export`, {\n        format\n      });\n      if (!response.data || !response.data.exportUrl) {\n        throw new Error(`Export response missing URL for ${format} format`);\n      }\n      console.log(`Export successful, received URL: ${response.data.exportUrl}`);\n\n      // Construct the full URL if it's a relative path\n      let fullUrl = response.data.exportUrl;\n      if (fullUrl.startsWith('/')) {\n        // Get the base URL from the current window location\n        const baseUrl = `${window.location.protocol}//${window.location.host}`;\n        fullUrl = `${baseUrl}${fullUrl}`;\n        console.log(`Constructed full URL: ${fullUrl}`);\n      }\n\n      // Handle different export formats\n      if (format === \"pdf\") {\n        // For PDF, create a download link\n        console.log(`Creating download link for PDF: ${fullUrl}`);\n        const link = document.createElement(\"a\");\n        link.href = fullUrl;\n        link.download = `${formData.companyName}_CIA_Report.pdf`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n      } else {\n        // For other formats, open in new tab\n        console.log(`Opening URL in new tab: ${fullUrl}`);\n        window.open(fullUrl, \"_blank\");\n      }\n    } catch (error) {\n      console.error(`Error exporting report as ${format}:`, error);\n\n      // Provide more detailed error information\n      let errorMessage = `Failed to export as ${format}. `;\n      if (error.response) {\n        var _error$response$data2;\n        // The request was made and the server responded with a status code\n        // that falls out of the range of 2xx\n        const statusCode = error.response.status;\n        const serverMessage = ((_error$response$data2 = error.response.data) === null || _error$response$data2 === void 0 ? void 0 : _error$response$data2.message) || 'Unknown server error';\n        errorMessage += `Server responded with status ${statusCode}: ${serverMessage}`;\n        console.error('Export error response:', error.response.data);\n      } else if (error.request) {\n        // The request was made but no response was received\n        errorMessage += 'No response received from server. Please check your connection.';\n      } else {\n        // Something happened in setting up the request that triggered an Error\n        errorMessage += error.message || 'Unknown error occurred';\n      }\n      setExportError(errorMessage);\n    } finally {\n      setExportLoading(prev => ({\n        ...prev,\n        [format]: false\n      }));\n    }\n  };\n\n  // Render form\n  const renderForm = () => /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"company-name\",\n          children: \"Company Name *\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          id: \"company-name\",\n          value: formData.companyName,\n          onChange: e => handleChange(\"companyName\", e.target.value),\n          placeholder: \"e.g. Acme Corporation\",\n          className: errors.companyName ? \"border-destructive\" : \"\",\n          disabled: isSubmitting\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this), errors.companyName && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-destructive\",\n          children: errors.companyName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"website-url\",\n          children: \"Website URL *\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          id: \"website-url\",\n          value: formData.websiteUrl,\n          onChange: e => handleChange(\"websiteUrl\", e.target.value),\n          placeholder: \"e.g. https://www.example.com\",\n          className: errors.websiteUrl ? \"border-destructive\" : \"\",\n          disabled: isSubmitting\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this), errors.websiteUrl && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-destructive\",\n          children: errors.websiteUrl\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"kpoi\",\n          children: \"Key Person of Influence (Optional)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          id: \"kpoi\",\n          value: formData.keyPersonOfInfluence,\n          onChange: e => handleChange(\"keyPersonOfInfluence\", e.target.value),\n          placeholder: \"e.g. John Smith, CEO\",\n          disabled: isSubmitting\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs text-muted-foreground\",\n          children: \"The main person associated with your brand\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"primary-keyword\",\n          children: \"Primary Keyword (Optional)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          id: \"primary-keyword\",\n          value: formData.primaryKeyword,\n          onChange: e => handleChange(\"primaryKeyword\", e.target.value),\n          placeholder: \"e.g. digital marketing services\",\n          disabled: isSubmitting\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs text-muted-foreground\",\n          children: \"Main keyword you want to rank for\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 9\n      }, this), errors.submit && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-3 bg-destructive/10 border border-destructive rounded-md\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-destructive flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n            className: \"h-4 w-4 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 15\n          }, this), errors.submit]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        className: \"w-full\",\n        disabled: isSubmitting,\n        children: isSubmitting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Loader2, {\n            className: \"mr-2 h-4 w-4 animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 15\n          }, this), \"Submitting...\"]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [\"Generate CIA Report\", /*#__PURE__*/_jsxDEV(FileText, {\n            className: \"ml-2 h-4 w-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 310,\n    columnNumber: 5\n  }, this);\n\n  // Render progress\n  const renderProgress = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium\",\n        children: reportStatus === \"completed\" ? \"Your CIA Report is Ready!\" : reportStatus === \"failed\" ? \"Report Generation Failed\" : \"Generating Your CIA Report...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-muted-foreground\",\n        children: reportStatus === \"completed\" ? \"Your comprehensive marketing intelligence report has been generated. You can now export it in various formats.\" : reportStatus === \"failed\" ? \"There was an error generating your report. Please try again or contact support.\" : \"Our AI is analyzing your company data across all 6 phases. This may take a few minutes.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between text-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Overall Progress\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [reportProgress, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full bg-muted rounded-full h-2.5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: cn(\"h-2.5 rounded-full\", reportStatus === \"completed\" ? \"bg-success\" : \"bg-primary\"),\n          style: {\n            width: `${reportProgress}%`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-sm font-medium\",\n        children: \"CIA Workflow Phases\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 9\n      }, this), phases.map((phase, index) => {\n        const phaseDetail = phaseDetails[index] || {\n          progress: 0,\n          status: index === currentPhase - 1 ? \"processing\" : \"pending\"\n        };\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"flex items-center\",\n              children: [phaseDetail.status === \"completed\" ? /*#__PURE__*/_jsxDEV(CheckCircle2, {\n                className: \"h-4 w-4 text-success mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 21\n              }, this) : phaseDetail.status === \"processing\" ? /*#__PURE__*/_jsxDEV(Loader2, {\n                className: \"h-4 w-4 text-primary mr-2 animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-4 w-4 rounded-full border border-muted-foreground mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 21\n              }, this), phase.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [phaseDetail.progress, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full bg-muted rounded-full h-1.5\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: cn(\"h-1.5 rounded-full\", phaseDetail.status === \"completed\" ? \"bg-success\" : \"bg-primary\"),\n              style: {\n                width: `${phaseDetail.progress}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-muted-foreground\",\n            children: phase.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 15\n          }, this)]\n        }, phase.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 7\n    }, this), reportStatus === \"completed\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4 pt-4 border-t\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-sm font-medium\",\n        children: \"Export Options\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col sm:flex-row gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          onClick: () => exportReport(\"pdf\"),\n          disabled: exportLoading.pdf,\n          className: \"flex-1\",\n          children: [exportLoading.pdf ? /*#__PURE__*/_jsxDEV(Loader2, {\n            className: \"mr-2 h-4 w-4 animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(Download, {\n            className: \"mr-2 h-4 w-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 17\n          }, this), \"Export as PDF\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          onClick: () => exportReport(\"google_sheets\"),\n          disabled: exportLoading.sheets,\n          className: \"flex-1\",\n          children: [exportLoading.sheets ? /*#__PURE__*/_jsxDEV(Loader2, {\n            className: \"mr-2 h-4 w-4 animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(FileSpreadsheet, {\n            className: \"mr-2 h-4 w-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 17\n          }, this), \"Export to Google Sheets\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          onClick: () => exportReport(\"notion\"),\n          disabled: exportLoading.notion,\n          className: \"flex-1\",\n          children: [exportLoading.notion ? /*#__PURE__*/_jsxDEV(Loader2, {\n            className: \"mr-2 h-4 w-4 animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(Database, {\n            className: \"mr-2 h-4 w-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 515,\n            columnNumber: 17\n          }, this), \"Export to Notion\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 506,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 11\n      }, this), exportError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-3 bg-destructive/10 border border-destructive rounded-md\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-destructive flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n            className: \"h-4 w-4 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 524,\n            columnNumber: 17\n          }, this), exportError]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 9\n    }, this), reportStatus === \"completed\" && reportResults && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4 pt-4 border-t\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-sm font-medium\",\n        children: \"Report Preview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border rounded-md p-4 bg-muted/50\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"font-medium\",\n          children: reportResults.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-muted-foreground mt-1\",\n          children: reportResults.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 13\n        }, this), reportResults.phases && reportResults.phases.map(phase => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"text-sm font-medium\",\n            children: phase.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-muted-foreground\",\n            children: phase.summary\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 546,\n            columnNumber: 17\n          }, this)]\n        }, phase.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm mt-4\",\n          children: \"For the complete report with all insights and recommendations, please use one of the export options above.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 538,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 534,\n      columnNumber: 9\n    }, this), reportStatus === \"failed\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 bg-destructive/10 border border-destructive rounded-md\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-start space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n          className: \"h-5 w-5 text-destructive mt-0.5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"font-medium text-destructive\",\n            children: \"Report Generation Failed\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 563,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-muted-foreground mt-1\",\n            children: \"There was an error generating your CIA report. Please try again or contact support for assistance.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 564,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline\",\n            className: \"mt-4\",\n            onClick: () => {\n              setIsSubmitted(false);\n              setReportStatus(\"idle\");\n              setReportProgress(0);\n              setCurrentPhase(0);\n              setPhaseDetails([]);\n              setReportResults(null);\n              setErrors({});\n            },\n            children: \"Try Again\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 562,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 559,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 400,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto py-8 px-4 md:px-6\",\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      className: \"w-full max-w-4xl mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n          className: \"flex items-center\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"gradient-text\",\n            children: \"CIA Wizard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 594,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 593,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n          children: \"The Colossal Intelligence Arsenal will gather and process data to create your \\\"Master Content Bible\\\"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 596,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n        children: isSubmitted ? renderProgress() : renderForm()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 601,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardFooter, {\n        className: \"flex justify-between\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-muted-foreground\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(Building2, {\n              className: \"h-3 w-3 mr-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 608,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: formData.companyName || \"Your Company\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 609,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 607,\n            columnNumber: 13\n          }, this), formData.websiteUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center mt-1\",\n            children: [/*#__PURE__*/_jsxDEV(Globe, {\n              className: \"h-3 w-3 mr-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 613,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: formData.websiteUrl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 614,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 612,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 606,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 605,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 591,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 590,\n    columnNumber: 5\n  }, this);\n};\n_s(CIAWizard, \"Sals+1X23eLodZG/F9kedxnuYRY=\");\n_c = CIAWizard;\nexport default CIAWizard;\nvar _c;\n$RefreshReg$(_c, \"CIAWizard\");","map":{"version":3,"names":["React","useState","useEffect","axios","CheckCircle2","AlertCircle","Building2","Globe","FileText","Download","FileSpreadsheet","Database","Loader2","Button","Input","Label","Card","CardHeader","CardTitle","CardDescription","CardContent","CardFooter","cn","jsxDEV","_jsxDEV","Fragment","_Fragment","CIAWizard","_s","formData","setFormData","companyName","websiteUrl","keyPersonOfInfluence","primaryKeyword","isSubmitting","setIsSubmitting","isSubmitted","setIsSubmitted","errors","setErrors","reportId","setReportId","reportStatus","setReportStatus","reportProgress","setReportProgress","currentPhase","setCurrentPhase","phaseDetails","setPhaseDetails","reportResults","setReportResults","exportLoading","setExportLoading","pdf","sheets","notion","exportError","setExportError","phases","id","name","description","handleChange","field","value","prev","newErrors","validateForm","trim","test","Object","keys","length","handleSubmit","e","preventDefault","response","post","initialData","role","data","report","startStatusPolling","error","_error$response","_error$response$data","console","submit","message","pollInterval","setInterval","get","status","progress","phaseProgress","updatedPhases","phaseIndex","Math","max","i","clearInterval","fetchReportResults","results","exportReport","format","log","exportUrl","Error","fullUrl","startsWith","baseUrl","window","location","protocol","host","link","document","createElement","href","download","body","appendChild","click","removeChild","open","errorMessage","_error$response$data2","statusCode","serverMessage","request","renderForm","onSubmit","children","className","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","onChange","target","placeholder","disabled","type","renderProgress","style","width","map","phase","index","phaseDetail","variant","onClick","summary","_c","$RefreshReg$"],"sources":["/Users/rodericandrews/Factory-ai/waterfall-app/client/src/components/CIA/CIAWizard.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"../../utils/axios\";\nimport { \n  CheckCircle2, \n  AlertCircle, \n  Building2, \n  Globe,\n  FileText,\n  Download,\n  FileSpreadsheet,\n  Database,\n  Loader2\n} from \"lucide-react\";\n\n// Import shadcn/ui components\nimport { Button } from \"../ui/button\";\nimport { Input } from \"../ui/input\";\nimport { Label } from \"../ui/label\";\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent, CardFooter } from \"../ui/card\";\n\n// Utility functions\nimport { cn } from \"../../lib/utils\";\n\n/**\n * CIA Wizard - Simplified form for gathering company intelligence data\n * Collects minimal information needed to generate a comprehensive marketing intelligence report\n */\nconst CIAWizard = () => {\n  // Form state\n  const [formData, setFormData] = useState({\n    companyName: \"\",\n    websiteUrl: \"\",\n    keyPersonOfInfluence: \"\",\n    primaryKeyword: \"\"\n  });\n  \n  // Submission state\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const [errors, setErrors] = useState({});\n  \n  // Report state\n  const [reportId, setReportId] = useState(null);\n  const [reportStatus, setReportStatus] = useState(\"idle\"); // idle, processing, completed, failed\n  const [reportProgress, setReportProgress] = useState(0);\n  const [currentPhase, setCurrentPhase] = useState(0);\n  const [phaseDetails, setPhaseDetails] = useState([]);\n  const [reportResults, setReportResults] = useState(null);\n  const [exportLoading, setExportLoading] = useState({\n    pdf: false,\n    sheets: false,\n    notion: false\n  });\n  const [exportError, setExportError] = useState(null);\n\n  // CIA workflow phases\n  const phases = [\n    { id: 1, name: \"Business Intelligence\", description: \"Analyzing company data and market position\" },\n    { id: 2, name: \"SEO & Social Intelligence\", description: \"Researching keywords and competitive landscape\" },\n    { id: 3, name: \"Strategic Synthesis\", description: \"Combining insights for strategic recommendations\" },\n    { id: 4, name: \"Golden Hippo Offer\", description: \"Developing tiered pricing and value stacks\" },\n    { id: 5, name: \"Convergence Blender\", description: \"Creating 12-week content calendar\" },\n    { id: 6, name: \"Master Content Bible\", description: \"Finalizing implementation roadmap\" }\n  ];\n\n  // Handle input changes\n  const handleChange = (field, value) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n    \n    // Clear error when field is updated\n    if (errors[field]) {\n      setErrors(prev => {\n        const newErrors = { ...prev };\n        delete newErrors[field];\n        return newErrors;\n      });\n    }\n  };\n\n  // Validate form\n  const validateForm = () => {\n    const newErrors = {};\n    \n    if (!formData.companyName.trim()) {\n      newErrors.companyName = \"Company name is required\";\n    }\n    \n    if (!formData.websiteUrl.trim()) {\n      newErrors.websiteUrl = \"Website URL is required\";\n    } else if (!/^(https?:\\/\\/)?([a-zA-Z0-9-]+\\.)+[a-zA-Z0-9-]+(\\/[a-zA-Z0-9-._~:/?#[\\]@!$&'()*+,;=]*)?$/.test(formData.websiteUrl)) {\n      newErrors.websiteUrl = \"Please enter a valid URL\";\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Submit form\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n    \n    setIsSubmitting(true);\n    \n    try {\n      // Create a new CIA report\n      const response = await axios.post(\"/cia/reports\", {\n        name: `${formData.companyName} Intelligence Report`,\n        description: `CIA report for ${formData.companyName}`,\n        initialData: {\n          companyName: formData.companyName,\n          websiteUrl: formData.websiteUrl,\n          keyPersonOfInfluence: formData.keyPersonOfInfluence ? {\n            name: formData.keyPersonOfInfluence,\n            role: \"Key Person of Influence\"\n          } : {},\n          primaryKeyword: formData.primaryKeyword\n        }\n      });\n      \n      // Get the report ID\n      const { id } = response.data.report;\n      setReportId(id);\n      setIsSubmitted(true);\n      setReportStatus(\"processing\");\n      \n      // Begin polling for status updates\n      startStatusPolling(id);\n    } catch (error) {\n      console.error(\"Error submitting CIA report:\", error);\n      setErrors({\n        submit: error.response?.data?.message || \"Failed to submit report. Please try again.\"\n      });\n      setIsSubmitting(false);\n    }\n  };\n\n  // Poll for report status updates\n  const startStatusPolling = (id) => {\n    const pollInterval = setInterval(async () => {\n      try {\n        const response = await axios.get(`/cia/reports/${id}/status`);\n        const { status, progress, currentPhase, phaseProgress } = response.data;\n        \n        setReportStatus(status);\n        setReportProgress(progress);\n        \n        if (currentPhase) {\n          setCurrentPhase(currentPhase);\n          \n          // Update phase details\n          setPhaseDetails(prev => {\n            const updatedPhases = [...prev];\n            const phaseIndex = currentPhase - 1;\n            \n            if (!updatedPhases[phaseIndex]) {\n              updatedPhases[phaseIndex] = {\n                id: currentPhase,\n                progress: phaseProgress || 0,\n                status: \"processing\"\n              };\n            } else {\n              updatedPhases[phaseIndex] = {\n                ...updatedPhases[phaseIndex],\n                // keep the max between existing and new progress\n                progress: Math.max(\n                  updatedPhases[phaseIndex].progress || 0,\n                  phaseProgress || 0\n                ),\n                status:\n                  (phaseProgress ?? updatedPhases[phaseIndex].progress) >= 100\n                    ? \"completed\"\n                    : \"processing\"\n              };\n            }\n\n            // -----------------------------------------------------------------\n            // Ensure *all previous* phases are marked as completed (100 %)\n            // so their bars don't remain stuck at 0 %.\n            // -----------------------------------------------------------------\n            for (let i = 0; i < phaseIndex; i++) {\n              if (!updatedPhases[i]) {\n                updatedPhases[i] = {\n                  id: i + 1,\n                  progress: 100,\n                  status: \"completed\"\n                };\n              } else {\n                updatedPhases[i] = {\n                  ...updatedPhases[i],\n                  progress: 100,\n                  status: \"completed\"\n                };\n              }\n            }\n            \n            return updatedPhases;\n          });\n        }\n        \n        // If completed or failed, stop polling and fetch results\n        if (status === \"completed\" || status === \"failed\") {\n          clearInterval(pollInterval);\n          \n          if (status === \"completed\") {\n            fetchReportResults(id);\n          }\n        }\n      } catch (error) {\n        console.error(\"Error polling report status:\", error);\n        // Don't stop polling on error, just log it\n      }\n    }, 3000); // Poll every 3 seconds\n    \n    // Clean up interval on component unmount\n    return () => clearInterval(pollInterval);\n  };\n\n  // Fetch report results\n  const fetchReportResults = async (id) => {\n    try {\n      const response = await axios.get(`/cia/reports/${id}`);\n      setReportResults(response.data);\n    } catch (error) {\n      console.error(\"Error fetching report results:\", error);\n      setErrors({\n        results: \"Failed to fetch report results. Please try refreshing the page.\"\n      });\n    }\n  };\n\n  // Export report\n  const exportReport = async (format) => {\n    setExportLoading(prev => ({ ...prev, [format]: true }));\n    setExportError(null);\n    \n    try {\n      console.log(`Starting export for format: ${format}, reportId: ${reportId}`);\n      \n      const response = await axios.post(`/cia/reports/${reportId}/export`, {\n        format\n      });\n      \n      if (!response.data || !response.data.exportUrl) {\n        throw new Error(`Export response missing URL for ${format} format`);\n      }\n      \n      console.log(`Export successful, received URL: ${response.data.exportUrl}`);\n      \n      // Construct the full URL if it's a relative path\n      let fullUrl = response.data.exportUrl;\n      if (fullUrl.startsWith('/')) {\n        // Get the base URL from the current window location\n        const baseUrl = `${window.location.protocol}//${window.location.host}`;\n        fullUrl = `${baseUrl}${fullUrl}`;\n        console.log(`Constructed full URL: ${fullUrl}`);\n      }\n      \n      // Handle different export formats\n      if (format === \"pdf\") {\n        // For PDF, create a download link\n        console.log(`Creating download link for PDF: ${fullUrl}`);\n        const link = document.createElement(\"a\");\n        link.href = fullUrl;\n        link.download = `${formData.companyName}_CIA_Report.pdf`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n      } else {\n        // For other formats, open in new tab\n        console.log(`Opening URL in new tab: ${fullUrl}`);\n        window.open(fullUrl, \"_blank\");\n      }\n    } catch (error) {\n      console.error(`Error exporting report as ${format}:`, error);\n      \n      // Provide more detailed error information\n      let errorMessage = `Failed to export as ${format}. `;\n      \n      if (error.response) {\n        // The request was made and the server responded with a status code\n        // that falls out of the range of 2xx\n        const statusCode = error.response.status;\n        const serverMessage = error.response.data?.message || 'Unknown server error';\n        \n        errorMessage += `Server responded with status ${statusCode}: ${serverMessage}`;\n        console.error('Export error response:', error.response.data);\n      } else if (error.request) {\n        // The request was made but no response was received\n        errorMessage += 'No response received from server. Please check your connection.';\n      } else {\n        // Something happened in setting up the request that triggered an Error\n        errorMessage += error.message || 'Unknown error occurred';\n      }\n      \n      setExportError(errorMessage);\n    } finally {\n      setExportLoading(prev => ({ ...prev, [format]: false }));\n    }\n  };\n\n  // Render form\n  const renderForm = () => (\n    <form onSubmit={handleSubmit}>\n      <div className=\"space-y-4\">\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"company-name\">Company Name *</Label>\n          <Input\n            id=\"company-name\"\n            value={formData.companyName}\n            onChange={(e) => handleChange(\"companyName\", e.target.value)}\n            placeholder=\"e.g. Acme Corporation\"\n            className={errors.companyName ? \"border-destructive\" : \"\"}\n            disabled={isSubmitting}\n          />\n          {errors.companyName && (\n            <p className=\"text-sm text-destructive\">{errors.companyName}</p>\n          )}\n        </div>\n        \n        <div className=\"space-y-2\">\n          <Label htmlFor=\"website-url\">Website URL *</Label>\n          <Input\n            id=\"website-url\"\n            value={formData.websiteUrl}\n            onChange={(e) => handleChange(\"websiteUrl\", e.target.value)}\n            placeholder=\"e.g. https://www.example.com\"\n            className={errors.websiteUrl ? \"border-destructive\" : \"\"}\n            disabled={isSubmitting}\n          />\n          {errors.websiteUrl && (\n            <p className=\"text-sm text-destructive\">{errors.websiteUrl}</p>\n          )}\n        </div>\n        \n        <div className=\"space-y-2\">\n          <Label htmlFor=\"kpoi\">Key Person of Influence (Optional)</Label>\n          <Input\n            id=\"kpoi\"\n            value={formData.keyPersonOfInfluence}\n            onChange={(e) => handleChange(\"keyPersonOfInfluence\", e.target.value)}\n            placeholder=\"e.g. John Smith, CEO\"\n            disabled={isSubmitting}\n          />\n          <p className=\"text-xs text-muted-foreground\">The main person associated with your brand</p>\n        </div>\n        \n        <div className=\"space-y-2\">\n          <Label htmlFor=\"primary-keyword\">Primary Keyword (Optional)</Label>\n          <Input\n            id=\"primary-keyword\"\n            value={formData.primaryKeyword}\n            onChange={(e) => handleChange(\"primaryKeyword\", e.target.value)}\n            placeholder=\"e.g. digital marketing services\"\n            disabled={isSubmitting}\n          />\n          <p className=\"text-xs text-muted-foreground\">Main keyword you want to rank for</p>\n        </div>\n        \n        {errors.submit && (\n          <div className=\"p-3 bg-destructive/10 border border-destructive rounded-md\">\n            <p className=\"text-sm text-destructive flex items-center\">\n              <AlertCircle className=\"h-4 w-4 mr-2\" />\n              {errors.submit}\n            </p>\n          </div>\n        )}\n      </div>\n      \n      <div className=\"mt-6\">\n        <Button \n          type=\"submit\" \n          className=\"w-full\" \n          disabled={isSubmitting}\n        >\n          {isSubmitting ? (\n            <>\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              Submitting...\n            </>\n          ) : (\n            <>\n              Generate CIA Report\n              <FileText className=\"ml-2 h-4 w-4\" />\n            </>\n          )}\n        </Button>\n      </div>\n    </form>\n  );\n\n  // Render progress\n  const renderProgress = () => (\n    <div className=\"space-y-6\">\n      <div className=\"space-y-2\">\n        <h3 className=\"text-lg font-medium\">\n          {reportStatus === \"completed\" \n            ? \"Your CIA Report is Ready!\" \n            : reportStatus === \"failed\"\n            ? \"Report Generation Failed\"\n            : \"Generating Your CIA Report...\"}\n        </h3>\n        <p className=\"text-sm text-muted-foreground\">\n          {reportStatus === \"completed\"\n            ? \"Your comprehensive marketing intelligence report has been generated. You can now export it in various formats.\"\n            : reportStatus === \"failed\"\n            ? \"There was an error generating your report. Please try again or contact support.\"\n            : \"Our AI is analyzing your company data across all 6 phases. This may take a few minutes.\"}\n        </p>\n      </div>\n      \n      {/* Overall progress */}\n      <div className=\"space-y-2\">\n        <div className=\"flex justify-between text-sm\">\n          <span>Overall Progress</span>\n          <span>{reportProgress}%</span>\n        </div>\n        <div className=\"w-full bg-muted rounded-full h-2.5\">\n          <div\n            className={cn(\n              \"h-2.5 rounded-full\",\n              reportStatus === \"completed\" ? \"bg-success\" : \"bg-primary\"\n            )}\n            style={{ width: `${reportProgress}%` }}\n          ></div>\n        </div>\n      </div>\n      \n      {/* Phase progress */}\n      <div className=\"space-y-4\">\n        <h4 className=\"text-sm font-medium\">CIA Workflow Phases</h4>\n        \n        {phases.map((phase, index) => {\n          const phaseDetail = phaseDetails[index] || { progress: 0, status: index === currentPhase - 1 ? \"processing\" : \"pending\" };\n          \n          return (\n            <div key={phase.id} className=\"space-y-1\">\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"flex items-center\">\n                  {phaseDetail.status === \"completed\" ? (\n                    <CheckCircle2 className=\"h-4 w-4 text-success mr-2\" />\n                  ) : phaseDetail.status === \"processing\" ? (\n                    <Loader2 className=\"h-4 w-4 text-primary mr-2 animate-spin\" />\n                  ) : (\n                    <div className=\"h-4 w-4 rounded-full border border-muted-foreground mr-2\" />\n                  )}\n                  {phase.name}\n                </span>\n                <span>{phaseDetail.progress}%</span>\n              </div>\n              <div className=\"w-full bg-muted rounded-full h-1.5\">\n                <div\n                  className={cn(\n                    \"h-1.5 rounded-full\",\n                    phaseDetail.status === \"completed\" ? \"bg-success\" : \"bg-primary\"\n                  )}\n                  style={{ width: `${phaseDetail.progress}%` }}\n                ></div>\n              </div>\n              <p className=\"text-xs text-muted-foreground\">{phase.description}</p>\n            </div>\n          );\n        })}\n      </div>\n      \n      {/* Export options (visible when completed) */}\n      {reportStatus === \"completed\" && (\n        <div className=\"space-y-4 pt-4 border-t\">\n          <h4 className=\"text-sm font-medium\">Export Options</h4>\n          \n          <div className=\"flex flex-col sm:flex-row gap-3\">\n            <Button \n              variant=\"outline\" \n              onClick={() => exportReport(\"pdf\")}\n              disabled={exportLoading.pdf}\n              className=\"flex-1\"\n            >\n              {exportLoading.pdf ? (\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              ) : (\n                <Download className=\"mr-2 h-4 w-4\" />\n              )}\n              Export as PDF\n            </Button>\n            \n            <Button \n              variant=\"outline\" \n              onClick={() => exportReport(\"google_sheets\")}\n              disabled={exportLoading.sheets}\n              className=\"flex-1\"\n            >\n              {exportLoading.sheets ? (\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              ) : (\n                <FileSpreadsheet className=\"mr-2 h-4 w-4\" />\n              )}\n              Export to Google Sheets\n            </Button>\n            \n            <Button \n              variant=\"outline\" \n              onClick={() => exportReport(\"notion\")}\n              disabled={exportLoading.notion}\n              className=\"flex-1\"\n            >\n              {exportLoading.notion ? (\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              ) : (\n                <Database className=\"mr-2 h-4 w-4\" />\n              )}\n              Export to Notion\n            </Button>\n          </div>\n          \n          {exportError && (\n            <div className=\"p-3 bg-destructive/10 border border-destructive rounded-md\">\n              <p className=\"text-sm text-destructive flex items-center\">\n                <AlertCircle className=\"h-4 w-4 mr-2\" />\n                {exportError}\n              </p>\n            </div>\n          )}\n        </div>\n      )}\n      \n      {/* Results preview (visible when completed) */}\n      {reportStatus === \"completed\" && reportResults && (\n        <div className=\"space-y-4 pt-4 border-t\">\n          <h4 className=\"text-sm font-medium\">Report Preview</h4>\n          \n          {/* This would be expanded with actual report data visualization */}\n          <div className=\"border rounded-md p-4 bg-muted/50\">\n            <h5 className=\"font-medium\">{reportResults.name}</h5>\n            <p className=\"text-sm text-muted-foreground mt-1\">{reportResults.description}</p>\n            \n            {/* Example of displaying some report data */}\n            {reportResults.phases && reportResults.phases.map((phase) => (\n              <div key={phase.id} className=\"mt-4\">\n                <h6 className=\"text-sm font-medium\">{phase.name}</h6>\n                <p className=\"text-xs text-muted-foreground\">{phase.summary}</p>\n              </div>\n            ))}\n            \n            <p className=\"text-sm mt-4\">\n              For the complete report with all insights and recommendations, please use one of the export options above.\n            </p>\n          </div>\n        </div>\n      )}\n      \n      {/* Error message (visible when failed) */}\n      {reportStatus === \"failed\" && (\n        <div className=\"p-4 bg-destructive/10 border border-destructive rounded-md\">\n          <div className=\"flex items-start space-x-2\">\n            <AlertCircle className=\"h-5 w-5 text-destructive mt-0.5\" />\n            <div>\n              <h5 className=\"font-medium text-destructive\">Report Generation Failed</h5>\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                There was an error generating your CIA report. Please try again or contact support for assistance.\n              </p>\n              <Button \n                variant=\"outline\" \n                className=\"mt-4\" \n                onClick={() => {\n                  setIsSubmitted(false);\n                  setReportStatus(\"idle\");\n                  setReportProgress(0);\n                  setCurrentPhase(0);\n                  setPhaseDetails([]);\n                  setReportResults(null);\n                  setErrors({});\n                }}\n              >\n                Try Again\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n\n  return (\n    <div className=\"container mx-auto py-8 px-4 md:px-6\">\n      <Card className=\"w-full max-w-4xl mx-auto\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center\">\n            <span className=\"gradient-text\">CIA Wizard</span>\n          </CardTitle>\n          <CardDescription>\n            The Colossal Intelligence Arsenal will gather and process data to create your \"Master Content Bible\"\n          </CardDescription>\n        </CardHeader>\n        \n        <CardContent>\n          {isSubmitted ? renderProgress() : renderForm()}\n        </CardContent>\n        \n        <CardFooter className=\"flex justify-between\">\n          <div className=\"text-xs text-muted-foreground\">\n            <div className=\"flex items-center\">\n              <Building2 className=\"h-3 w-3 mr-1\" />\n              <span>{formData.companyName || \"Your Company\"}</span>\n            </div>\n            {formData.websiteUrl && (\n              <div className=\"flex items-center mt-1\">\n                <Globe className=\"h-3 w-3 mr-1\" />\n                <span>{formData.websiteUrl}</span>\n              </div>\n            )}\n          </div>\n        </CardFooter>\n      </Card>\n    </div>\n  );\n};\n\nexport default CIAWizard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}